{"version":3,"file":"collection.js","sourceRoot":"","sources":["../../src/collection.ts"],"names":[],"mappings":"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","sourcesContent":["import { ArrayCursor } from \"./cursor\";\nimport { Connection } from \"./connection\";\nimport { Route } from \"./route\";\n\nexport enum Types {\n  DOCUMENT_COLLECTION = 2,\n  EDGE_COLLECTION = 3\n}\n\nexport type DocumentHandle =\n  | string\n  | {\n      _key?: string;\n      _id?: string;\n    };\n\nexport type IndexHandle =\n  | string\n  | {\n      id?: string;\n    };\n\nexport function isArangoCollection(\n  collection: any\n): collection is ArangoCollection {\n  return Boolean(collection && collection.isArangoCollection);\n}\n\nexport interface ArangoCollection {\n  isArangoCollection: true;\n  name: string;\n}\n\nexport abstract class BaseCollection implements ArangoCollection {\n  isArangoCollection: true = true;\n  name: string;\n  type: number;\n  protected _urlPrefix: string;\n  protected _idPrefix: string;\n  protected _connection: Connection;\n  protected _api: Route;\n\n  constructor(connection: Connection, name: string) {\n    this.name = name;\n    this._urlPrefix = `/collection/${this.name}/`;\n    this._idPrefix = `${this.name}/`;\n    this._connection = connection;\n    this._api = this._connection.route(\"/_api\");\n    if (this._connection.arangoMajor >= 3) {\n      this.first = undefined!;\n      this.last = undefined!;\n      this.createCapConstraint = undefined!;\n    }\n  }\n\n  protected abstract _documentPath(documentHandle: DocumentHandle): string;\n\n  protected _documentHandle(documentHandle: DocumentHandle) {\n    if (typeof documentHandle !== \"string\") {\n      if (documentHandle._id) {\n        return documentHandle._id;\n      }\n      if (documentHandle._key) {\n        return this._idPrefix + documentHandle._key;\n      }\n      throw new Error(\"Document handle must be a document or string\");\n    }\n    if (documentHandle.indexOf(\"/\") === -1) {\n      return this._idPrefix + documentHandle;\n    }\n    return documentHandle;\n  }\n\n  protected _indexHandle(indexHandle: IndexHandle) {\n    if (typeof indexHandle !== \"string\") {\n      if (indexHandle.id) {\n        return indexHandle.id;\n      }\n      throw new Error(\"Index handle must be a index or string\");\n    }\n    if (indexHandle.indexOf(\"/\") === -1) {\n      return this._idPrefix + indexHandle;\n    }\n    return indexHandle;\n  }\n\n  protected async _get(path: string, qs?: any) {\n    const res = await this._api.get(this._urlPrefix + path, qs);\n    return res.body;\n  }\n\n  protected async _put(path: string, body: any) {\n    const res = await this._api.put(this._urlPrefix + path, body);\n    return res.body;\n  }\n\n  async get() {\n    const res = await this._api.get(`/collection/${this.name}`);\n    return res.body;\n  }\n\n  async create(properties?: any) {\n    const res = await this._api.post(\"/collection\", {\n      ...properties,\n      name: this.name,\n      type: this.type\n    });\n    return res.body;\n  }\n\n  properties() {\n    return this._get(\"properties\");\n  }\n\n  count() {\n    return this._get(\"count\");\n  }\n\n  figures() {\n    return this._get(\"figures\");\n  }\n\n  revision() {\n    return this._get(\"revision\");\n  }\n\n  checksum(opts?: any) {\n    return this._get(\"checksum\", opts);\n  }\n\n  load(count?: boolean) {\n    return this._put(\n      \"load\",\n      typeof count === \"boolean\" ? { count: count } : undefined\n    );\n  }\n\n  unload() {\n    return this._put(\"unload\", undefined);\n  }\n\n  setProperties(properties: any) {\n    return this._put(\"properties\", properties);\n  }\n\n  async rename(name: string) {\n    const res = await this._api.put(this._urlPrefix + \"rename\", { name });\n    this.name = name;\n    this._idPrefix = `${name}/`;\n    this._urlPrefix = `/collection/${name}/`;\n    return res.body;\n  }\n\n  rotate() {\n    return this._put(\"rotate\", undefined);\n  }\n\n  truncate() {\n    return this._put(\"truncate\", undefined);\n  }\n\n  async drop(opts?: any) {\n    const res = await this._api.delete(`/collection/${this.name}`, opts);\n    return res.body;\n  }\n\n  async replace(documentHandle: DocumentHandle, newValue: any, opts: any = {}) {\n    const headers: { [key: string]: string } = {};\n    if (typeof opts === \"string\") {\n      opts = { rev: opts };\n    }\n    if (opts.rev && this._connection.arangoMajor >= 3) {\n      let rev: string;\n      ({ rev, ...opts } = opts);\n      headers[\"if-match\"] = rev;\n    }\n    const res = await this._api.put(\n      this._documentPath(documentHandle),\n      newValue,\n      opts,\n      headers\n    );\n    return res.body;\n  }\n\n  async update(documentHandle: DocumentHandle, newValue: any, opts: any = {}) {\n    const headers: { [key: string]: string } = {};\n    if (typeof opts === \"string\") {\n      opts = { rev: opts };\n    }\n    if (opts.rev && this._connection.arangoMajor >= 3) {\n      let rev: string;\n      ({ rev, ...opts } = opts);\n      headers[\"if-match\"] = rev;\n    }\n    const res = await this._api.patch(\n      this._documentPath(documentHandle),\n      newValue,\n      opts,\n      headers\n    );\n    return res.body;\n  }\n\n  async bulkUpdate(newValues: any, opts?: any) {\n    const res = await this._api.patch(\n      `/document/${this.name}`,\n      newValues,\n      opts\n    );\n    return res.body;\n  }\n\n  async remove(documentHandle: DocumentHandle, opts: any = {}) {\n    const headers: { [key: string]: string } = {};\n    if (typeof opts === \"string\") {\n      opts = { rev: opts };\n    }\n    if (opts.rev && this._connection.arangoMajor >= 3) {\n      let rev: string;\n      ({ rev, ...opts } = opts);\n      headers[\"if-match\"] = rev;\n    }\n    const res = await this._api.delete(\n      this._documentPath(documentHandle),\n      opts,\n      headers\n    );\n    return res.body;\n  }\n\n  async list(type: string = \"id\") {\n    if (this._connection.arangoMajor <= 2) {\n      const res = await this._api.get(\"/document\", {\n        type,\n        collection: this.name\n      });\n      return res.body.documents;\n    }\n\n    const res = await this._api.put(\"/simple/all-keys\", {\n      type,\n      collection: this.name\n    });\n    return res.body.result;\n  }\n\n  async all(opts?: any) {\n    const res = await this._api.put(\"/simple/all\", {\n      ...opts,\n      collection: this.name\n    });\n    return new ArrayCursor(this._connection, res.body, res.host);\n  }\n\n  async any() {\n    const res = await this._api.put(\"/simple/any\", { collection: this.name });\n    return res.body.document;\n  }\n\n  async first(opts?: any) {\n    if (typeof opts === \"number\") {\n      opts = { count: opts };\n    }\n    const res = await this._api.put(\"/simple/first\", {\n      ...opts,\n      collection: this.name\n    });\n    return res.body.result;\n  }\n\n  async last(opts?: any) {\n    if (typeof opts === \"number\") {\n      opts = { count: opts };\n    }\n    const res = await this._api.put(\"/simple/last\", {\n      ...opts,\n      collection: this.name\n    });\n    return res.body.result;\n  }\n\n  async byExample(example: any, opts?: any) {\n    const res = await this._api.put(\"/simple/by-example\", {\n      ...opts,\n      example,\n      collection: this.name\n    });\n    return new ArrayCursor(this._connection, res.body, res.host);\n  }\n\n  async firstExample(example: any) {\n    const res = await this._api.put(\"/simple/first-example\", {\n      example,\n      collection: this.name\n    });\n    return res.body.document;\n  }\n\n  async removeByExample(example: any, opts?: any) {\n    const res = await this._api.put(\"/simple/remove-by-example\", {\n      ...opts,\n      example,\n      collection: this.name\n    });\n    return res.body;\n  }\n\n  async replaceByExample(example: any, newValue: any, opts?: any) {\n    const res = await this._api.put(\"/simple/replace-by-example\", {\n      ...opts,\n      example,\n      newValue,\n      collection: this.name\n    });\n    return res.body;\n  }\n\n  async updateByExample(example: any, newValue: any, opts?: any) {\n    const res = await this._api.put(\"/simple/update-by-example\", {\n      ...opts,\n      example,\n      newValue,\n      collection: this.name\n    });\n    return res.body;\n  }\n\n  async lookupByKeys(keys: string[]) {\n    const res = await this._api.put(\"/simple/lookup-by-keys\", {\n      keys,\n      collection: this.name\n    });\n    return res.body.documents;\n  }\n\n  async removeByKeys(keys: string[], options: any) {\n    const res = await this._api.put(\"/simple/remove-by-keys\", {\n      options,\n      keys,\n      collection: this.name\n    });\n    return res.body;\n  }\n\n  async import(data: any, opts?: any) {\n    const res = await this._api.request({\n      method: \"POST\",\n      path: \"/import\",\n      body: data,\n      isJsonStream: Boolean(!opts || opts.type !== \"array\"),\n      qs: { type: \"auto\", ...opts, collection: this.name }\n    });\n    return res.body;\n  }\n\n  async indexes() {\n    const res = await this._api.get(\"/index\", { collection: this.name });\n    return res.body.indexes;\n  }\n\n  async index(indexHandle: IndexHandle) {\n    const res = await this._api.get(`/index/${this._indexHandle(indexHandle)}`);\n    return res.body;\n  }\n\n  async createIndex(details: any) {\n    const res = await this._api.post(\"/index\", details, {\n      collection: this.name\n    });\n    return res.body;\n  }\n\n  async dropIndex(indexHandle: IndexHandle) {\n    const res = await this._api.delete(\n      `/index/${this._indexHandle(indexHandle)}`\n    );\n    return res.body;\n  }\n\n  async createCapConstraint(opts?: any) {\n    if (typeof opts === \"number\") {\n      opts = { size: opts };\n    }\n    const res = await this._api.post(\n      \"/index\",\n      { ...opts, type: \"cap\" },\n      { collection: this.name }\n    );\n    return res.body;\n  }\n\n  async createHashIndex(fields: string[] | string, opts?: any) {\n    if (typeof fields === \"string\") {\n      fields = [fields];\n    }\n    if (typeof opts === \"boolean\") {\n      opts = { unique: opts };\n    }\n    const res = await this._api.post(\n      \"/index\",\n      { unique: false, ...opts, type: \"hash\", fields: fields },\n      { collection: this.name }\n    );\n    return res.body;\n  }\n\n  async createSkipList(fields: string[] | string, opts?: any) {\n    if (typeof fields === \"string\") {\n      fields = [fields];\n    }\n    if (typeof opts === \"boolean\") {\n      opts = { unique: opts };\n    }\n    const res = await this._api.post(\n      \"/index\",\n      { unique: false, ...opts, type: \"skiplist\", fields: fields },\n      { collection: this.name }\n    );\n    return res.body;\n  }\n\n  async createPersistentIndex(fields: string[] | string, opts?: any) {\n    if (typeof fields === \"string\") {\n      fields = [fields];\n    }\n    if (typeof opts === \"boolean\") {\n      opts = { unique: opts };\n    }\n    const res = await this._api.post(\n      \"/index\",\n      { unique: false, ...opts, type: \"persistent\", fields: fields },\n      { collection: this.name }\n    );\n    return res.body;\n  }\n\n  async createGeoIndex(fields: string[] | string, opts?: any) {\n    if (typeof fields === \"string\") {\n      fields = [fields];\n    }\n    const res = await this._api.post(\n      \"/index\",\n      { ...opts, fields, type: \"geo\" },\n      { collection: this.name }\n    );\n    return res.body;\n  }\n\n  async createFulltextIndex(fields: string[] | string, minLength?: number) {\n    if (typeof fields === \"string\") {\n      fields = [fields];\n    }\n    const res = await this._api.post(\n      \"/index\",\n      { fields, minLength, type: \"fulltext\" },\n      { collection: this.name }\n    );\n    return res.body;\n  }\n\n  async fulltext(attribute: any, query: any, opts: any = {}) {\n    if (opts.index) opts.index = this._indexHandle(opts.index);\n    const res = await this._api.put(\"/simple/fulltext\", {\n      ...opts,\n      attribute,\n      query,\n      collection: this.name\n    });\n    return new ArrayCursor(this._connection, res.body, res.host);\n  }\n}\n\nexport class DocumentCollection extends BaseCollection {\n  type = Types.DOCUMENT_COLLECTION;\n  constructor(connection: Connection, name: string) {\n    super(connection, name);\n  }\n\n  protected _documentPath(documentHandle: DocumentHandle) {\n    return `/document/${this._documentHandle(documentHandle)}`;\n  }\n\n  async document(documentHandle: DocumentHandle) {\n    const res = await this._api.get(this._documentPath(documentHandle));\n    return res.body;\n  }\n\n  async save(data: any, opts?: any) {\n    if (typeof opts === \"boolean\") {\n      opts = { returnNew: opts };\n    }\n\n    if (this._connection.arangoMajor <= 2) {\n      const res = await this._api.post(`/document`, data, {\n        ...opts,\n        collection: this.name\n      });\n      return res.body;\n    }\n\n    const res = await this._api.post(`/document/${this.name}`, data, opts);\n    return res.body;\n  }\n}\n\nexport class EdgeCollection extends BaseCollection {\n  type = Types.EDGE_COLLECTION;\n\n  constructor(connection: Connection, name: string) {\n    super(connection, name);\n  }\n\n  protected _documentPath(documentHandle: DocumentHandle) {\n    if (this._connection.arangoMajor < 3) {\n      return `edge/${this._documentHandle(documentHandle)}`;\n    }\n    return `document/${this._documentHandle(documentHandle)}`;\n  }\n\n  async edge(documentHandle: DocumentHandle) {\n    const res = await this._api.get(this._documentPath(documentHandle));\n    return res.body;\n  }\n\n  async save(data: any): Promise<any>;\n  async save(\n    data: any,\n    fromId: DocumentHandle,\n    toId: DocumentHandle\n  ): Promise<any>;\n  async save(data: any, fromId?: DocumentHandle, toId?: DocumentHandle) {\n    if (fromId !== undefined) {\n      data._from = this._documentHandle(fromId);\n      data._to = this._documentHandle(toId!);\n    }\n    if (this._connection.arangoMajor <= 2) {\n      const res = await this._api.post(\"/edge\", data, {\n        collection: this.name,\n        from: data._from,\n        to: data._to\n      });\n      return res.body;\n    }\n\n    const res = await this._api.post(\"/document\", data, {\n      collection: this.name\n    });\n    return res.body;\n  }\n\n  protected async _edges(documentHandle: DocumentHandle, direction: any) {\n    const res = await this._api.get(`/edges/${this.name}`, {\n      direction,\n      vertex: this._documentHandle(documentHandle)\n    });\n    return res.body.edges;\n  }\n\n  edges(vertex: DocumentHandle) {\n    return this._edges(vertex, undefined);\n  }\n\n  inEdges(vertex: DocumentHandle) {\n    return this._edges(vertex, \"in\");\n  }\n\n  outEdges(vertex: DocumentHandle) {\n    return this._edges(vertex, \"out\");\n  }\n\n  async traversal(startVertex: DocumentHandle, opts?: any) {\n    const res = await this._api.post(\"/traversal\", {\n      ...opts,\n      startVertex,\n      edgeCollection: this.name\n    });\n    return res.body.result;\n  }\n}\n\nexport function constructCollection(connection: Connection, data: any) {\n  const Collection =\n    data.type === Types.EDGE_COLLECTION ? EdgeCollection : DocumentCollection;\n  return new Collection(connection, data.name);\n}\n"]}