!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.arangojs=t():e.arangojs=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=8)}([function(e,t,r){"use strict";e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){"use strict";function n(e){return Boolean(e&&e.query&&e.bindVars)}function o(e){return Boolean(e&&"function"==typeof e.toAQL)}function a(e){for(var t={},r=[],n=e[0],o=arguments.length,a=Array(o>1?o-1:0),i=1;i<o;i++)a[i-1]=arguments[i];for(var u=0;u<a.length;u++){var s=a[u],c=s;if(s&&"function"==typeof s.toAQL)n+=""+s.toAQL()+e[u+1];else{var p=r.indexOf(s),h=-1!==p,f="value"+(h?p:r.length);s&&s.isArangoCollection&&(f="@"+f,c=s.name),h||(r.push(s),t[f]=c),n+="@"+f+e[u+1]}}return{query:n,bindVars:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.isAqlQuery=n,t.isAqlLiteral=o,t.aql=a},function(e,t,r){"use strict";function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function i(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,a){try{var i=t[o](a),u=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});e(u)}return n("next")})}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e){return Boolean(e&&e.isArangoCollection)}function c(e,t){return new(t.type===l.EDGE_COLLECTION?y:d)(e,t.name)}Object.defineProperty(t,"__esModule",{value:!0}),t.EdgeCollection=t.DocumentCollection=t.BaseCollection=t.Types=void 0;var p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},h=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.isArangoCollection=s,t.constructCollection=c;var f=r(3),l=t.Types=void 0;!function(e){e[e.DOCUMENT_COLLECTION=2]="DOCUMENT_COLLECTION",e[e.EDGE_COLLECTION=3]="EDGE_COLLECTION"}(l||(t.Types=l={}));var v=t.BaseCollection=function(){function e(t,r){u(this,e),this.isArangoCollection=!0,this.name=r,this._urlPrefix="/collection/"+this.name+"/",this._idPrefix=this.name+"/",this._connection=t,this._api=this._connection.route("/_api"),this._connection.arangoMajor>=3&&(this.first=void 0,this.last=void 0,this.createCapConstraint=void 0)}return h(e,[{key:"_documentHandle",value:function(e){if("string"!=typeof e){if(e._id)return e._id;if(e._key)return this._idPrefix+e._key;throw new Error("Document handle must be a document or string")}return-1===e.indexOf("/")?this._idPrefix+e:e}},{key:"_indexHandle",value:function(e){if("string"!=typeof e){if(e.id)return e.id;throw new Error("Index handle must be a index or string")}return-1===e.indexOf("/")?this._idPrefix+e:e}},{key:"_get",value:function(){function e(e,r){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._api.get(this._urlPrefix+t,r);case 2:return n=e.sent,e.abrupt("return",n.body);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"_put",value:function(){function e(e,r){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._api.put(this._urlPrefix+t,r);case 2:return n=e.sent,e.abrupt("return",n.body);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"get",value:function(){function e(){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._api.get("/collection/"+this.name);case 2:return t=e.sent,e.abrupt("return",t.body);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"create",value:function(){function e(e){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._api.post("/collection",p({},t,{name:this.name,type:this.type}));case 2:return r=e.sent,e.abrupt("return",r.body);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"properties",value:function(){return this._get("properties")}},{key:"count",value:function(){return this._get("count")}},{key:"figures",value:function(){return this._get("figures")}},{key:"revision",value:function(){return this._get("revision")}},{key:"checksum",value:function(e){return this._get("checksum",e)}},{key:"load",value:function(e){return this._put("load","boolean"==typeof e?{count:e}:void 0)}},{key:"unload",value:function(){return this._put("unload",void 0)}},{key:"setProperties",value:function(e){return this._put("properties",e)}},{key:"rename",value:function(){function e(e){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._api.put(this._urlPrefix+"rename",{name:t});case 2:return r=e.sent,this.name=t,this._idPrefix=t+"/",this._urlPrefix="/collection/"+t+"/",e.abrupt("return",r.body);case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"rotate",value:function(){return this._put("rotate",void 0)}},{key:"truncate",value:function(){return this._put("truncate",void 0)}},{key:"drop",value:function(){function e(e){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._api.delete("/collection/"+this.name,t);case 2:return r=e.sent,e.abrupt("return",r.body);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"replace",value:function(){function e(e,r){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(t,r){var n,o,i,u,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={},"string"==typeof s&&(s={rev:s}),s.rev&&this._connection.arangoMajor>=3&&(o=void 0,i=s,o=i.rev,s=a(i,["rev"]),n["if-match"]=o),e.next=5,this._api.put(this._documentPath(t),r,s,n);case 5:return u=e.sent,e.abrupt("return",u.body);case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"update",value:function(){function e(e,r){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(t,r){var n,o,i,u,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={},"string"==typeof s&&(s={rev:s}),s.rev&&this._connection.arangoMajor>=3&&(o=void 0,i=s,o=i.rev,s=a(i,["rev"]),n["if-match"]=o),e.next=5,this._api.patch(this._documentPath(t),r,s,n);case 5:return u=e.sent,e.abrupt("return",u.body);case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"bulkUpdate",value:function(){function e(e,r){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._api.patch("/document/"+this.name,t,r);case 2:return n=e.sent,e.abrupt("return",n.body);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"remove",value:function(){function e(e){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(t){var r,n,o,i,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},"string"==typeof u&&(u={rev:u}),u.rev&&this._connection.arangoMajor>=3&&(n=void 0,o=u,n=o.rev,u=a(o,["rev"]),r["if-match"]=n),e.next=5,this._api.delete(this._documentPath(t),u,r);case 5:return i=e.sent,e.abrupt("return",i.body);case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"list",value:function(){function e(){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(){var t,r,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this._connection.arangoMajor<=2)){e.next=5;break}return e.next=3,this._api.get("/document",{type:n,collection:this.name});case 3:return t=e.sent,e.abrupt("return",t.body.documents);case 5:return e.next=7,this._api.put("/simple/all-keys",{type:n,collection:this.name});case 7:return r=e.sent,e.abrupt("return",r.body.result);case 9:case"end":return e.stop()}},e,this)}));return e}()},{key:"all",value:function(){function e(e){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._api.put("/simple/all",p({},t,{collection:this.name}));case 2:return r=e.sent,e.abrupt("return",new f.ArrayCursor(this._connection,r.body,r.host));case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"any",value:function(){function e(){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._api.put("/simple/any",{collection:this.name});case 2:return t=e.sent,e.abrupt("return",t.body.document);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"first",value:function(){function e(e){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"number"==typeof t&&(t={count:t}),e.next=3,this._api.put("/simple/first",p({},t,{collection:this.name}));case 3:return r=e.sent,e.abrupt("return",r.body.result);case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"last",value:function(){function e(e){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"number"==typeof t&&(t={count:t}),e.next=3,this._api.put("/simple/last",p({},t,{collection:this.name}));case 3:return r=e.sent,e.abrupt("return",r.body.result);case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"byExample",value:function(){function e(e,r){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._api.put("/simple/by-example",p({},r,{example:t,collection:this.name}));case 2:return n=e.sent,e.abrupt("return",new f.ArrayCursor(this._connection,n.body,n.host));case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"firstExample",value:function(){function e(e){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._api.put("/simple/first-example",{example:t,collection:this.name});case 2:return r=e.sent,e.abrupt("return",r.body.document);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"removeByExample",value:function(){function e(e,r){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._api.put("/simple/remove-by-example",p({},r,{example:t,collection:this.name}));case 2:return n=e.sent,e.abrupt("return",n.body);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"replaceByExample",value:function(){function e(e,r,n){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(t,r,n){var o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._api.put("/simple/replace-by-example",p({},n,{example:t,newValue:r,collection:this.name}));case 2:return o=e.sent,e.abrupt("return",o.body);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"updateByExample",value:function(){function e(e,r,n){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(t,r,n){var o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._api.put("/simple/update-by-example",p({},n,{example:t,newValue:r,collection:this.name}));case 2:return o=e.sent,e.abrupt("return",o.body);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"lookupByKeys",value:function(){function e(e){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._api.put("/simple/lookup-by-keys",{keys:t,collection:this.name});case 2:return r=e.sent,e.abrupt("return",r.body.documents);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"removeByKeys",value:function(){function e(e,r){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._api.put("/simple/remove-by-keys",{options:r,keys:t,collection:this.name});case 2:return n=e.sent,e.abrupt("return",n.body);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"import",value:function(){function e(e,r){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._api.request({method:"POST",path:"/import",body:t,isJsonStream:Boolean(!r||"array"!==r.type),qs:p({type:"auto"},r,{collection:this.name})});case 2:return n=e.sent,e.abrupt("return",n.body);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"indexes",value:function(){function e(){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._api.get("/index",{collection:this.name});case 2:return t=e.sent,e.abrupt("return",t.body.indexes);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"index",value:function(){function e(e){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._api.get("/index/"+this._indexHandle(t));case 2:return r=e.sent,e.abrupt("return",r.body);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"createIndex",value:function(){function e(e){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._api.post("/index",t,{collection:this.name});case 2:return r=e.sent,e.abrupt("return",r.body);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"dropIndex",value:function(){function e(e){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._api.delete("/index/"+this._indexHandle(t));case 2:return r=e.sent,e.abrupt("return",r.body);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"createCapConstraint",value:function(){function e(e){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"number"==typeof t&&(t={size:t}),e.next=3,this._api.post("/index",p({},t,{type:"cap"}),{collection:this.name});case 3:return r=e.sent,e.abrupt("return",r.body);case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"createHashIndex",value:function(){function e(e,r){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"string"==typeof t&&(t=[t]),"boolean"==typeof r&&(r={unique:r}),e.next=4,this._api.post("/index",p({unique:!1},r,{type:"hash",fields:t}),{collection:this.name});case 4:return n=e.sent,e.abrupt("return",n.body);case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"createSkipList",value:function(){function e(e,r){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"string"==typeof t&&(t=[t]),"boolean"==typeof r&&(r={unique:r}),e.next=4,this._api.post("/index",p({unique:!1},r,{type:"skiplist",fields:t}),{collection:this.name});case 4:return n=e.sent,e.abrupt("return",n.body);case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"createPersistentIndex",value:function(){function e(e,r){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"string"==typeof t&&(t=[t]),"boolean"==typeof r&&(r={unique:r}),e.next=4,this._api.post("/index",p({unique:!1},r,{type:"persistent",fields:t}),{collection:this.name});case 4:return n=e.sent,e.abrupt("return",n.body);case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"createGeoIndex",value:function(){function e(e,r){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"string"==typeof t&&(t=[t]),e.next=3,this._api.post("/index",p({},r,{fields:t,type:"geo"}),{collection:this.name});case 3:return n=e.sent,e.abrupt("return",n.body);case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"createFulltextIndex",value:function(){function e(e,r){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"string"==typeof t&&(t=[t]),e.next=3,this._api.post("/index",{fields:t,minLength:r,type:"fulltext"},{collection:this.name});case 3:return n=e.sent,e.abrupt("return",n.body);case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"fulltext",value:function(){function e(e,r){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(t,r){var n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o.index&&(o.index=this._indexHandle(o.index)),e.next=3,this._api.put("/simple/fulltext",p({},o,{attribute:t,query:r,collection:this.name}));case 3:return n=e.sent,e.abrupt("return",new f.ArrayCursor(this._connection,n.body,n.host));case 5:case"end":return e.stop()}},e,this)}));return e}()}]),e}(),d=t.DocumentCollection=function(e){function t(e,r){u(this,t);var o=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return o.type=l.DOCUMENT_COLLECTION,o}return o(t,e),h(t,[{key:"_documentPath",value:function(e){return"/document/"+this._documentHandle(e)}},{key:"document",value:function(){function e(e){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._api.get(this._documentPath(t));case 2:return r=e.sent,e.abrupt("return",r.body);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"save",value:function(){function e(e,r){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(t,r){var n,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("boolean"==typeof r&&(r={returnNew:r}),!(this._connection.arangoMajor<=2)){e.next=6;break}return e.next=4,this._api.post("/document",t,p({},r,{collection:this.name}));case 4:return n=e.sent,e.abrupt("return",n.body);case 6:return e.next=8,this._api.post("/document/"+this.name,t,r);case 8:return o=e.sent,e.abrupt("return",o.body);case 10:case"end":return e.stop()}},e,this)}));return e}()}]),t}(v),y=t.EdgeCollection=function(e){function t(e,r){u(this,t);var o=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return o.type=l.EDGE_COLLECTION,o}return o(t,e),h(t,[{key:"_documentPath",value:function(e){return this._connection.arangoMajor<3?"edge/"+this._documentHandle(e):"document/"+this._documentHandle(e)}},{key:"edge",value:function(){function e(e){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._api.get(this._documentPath(t));case 2:return r=e.sent,e.abrupt("return",r.body);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"save",value:function(){function e(e,r,n){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(t,r,n){var o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==r&&(t._from=this._documentHandle(r),t._to=this._documentHandle(n)),!(this._connection.arangoMajor<=2)){e.next=6;break}return e.next=4,this._api.post("/edge",t,{collection:this.name,from:t._from,to:t._to});case 4:return o=e.sent,e.abrupt("return",o.body);case 6:return e.next=8,this._api.post("/document",t,{collection:this.name});case 8:return a=e.sent,e.abrupt("return",a.body);case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"_edges",value:function(){function e(e,r){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._api.get("/edges/"+this.name,{direction:r,vertex:this._documentHandle(t)});case 2:return n=e.sent,e.abrupt("return",n.body.edges);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"edges",value:function(e){return this._edges(e,void 0)}},{key:"inEdges",value:function(e){return this._edges(e,"in")}},{key:"outEdges",value:function(e){return this._edges(e,"out")}},{key:"traversal",value:function(){function e(e,r){return t.apply(this,arguments)}var t=i(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._api.post("/traversal",p({},r,{startVertex:t,edgeCollection:this.name}));case 2:return n=e.sent,e.abrupt("return",n.body.result);case 4:case"end":return e.stop()}},e,this)}));return e}()}]),t}(v)},function(e,t,r){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,a){try{var i=t[o](a),u=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});e(u)}return n("next")})}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.ArrayCursor=function(){function e(t,r,n){a(this,e),this.extra=r.extra,this._connection=t,this._api=this._connection.route("/_api"),this._result=r.result,this._hasMore=Boolean(r.hasMore),this._id=r.id,this._host=n,this.count=r.count}return i(e,[{key:"_drain",value:function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._more();case 2:if(this._hasMore){e.next=4;break}return e.abrupt("return",this);case 4:return e.abrupt("return",this._drain());case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"_more",value:function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._hasMore){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,this._api.request({method:"PUT",path:"/cursor/"+this._id,host:this._host});case 6:r=e.sent,(t=this._result).push.apply(t,n(r.body.result)),this._hasMore=r.body.hasMore;case 9:case"end":return e.stop()}},e,this)}));return e}()},{key:"all",value:function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._drain();case 2:return t=this._result,this._result=[],e.abrupt("return",t);case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"next",value:function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._result.length||!this._hasMore){e.next=5;break}return e.next=3,this._more();case 3:e.next=0;break;case 5:if(this._result.length){e.next=7;break}return e.abrupt("return",void 0);case 7:return e.abrupt("return",this._result.shift());case 8:case"end":return e.stop()}},e,this)}));return e}()},{key:"hasNext",value:function(){return Boolean(this._hasMore||this._result.length)}},{key:"each",value:function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=0;case 1:if(!this._result.length&&!this._hasMore){e.next=15;break}n=void 0;case 3:if(!this._result.length){e.next=10;break}if(n=t(this._result.shift(),r,this),r++,!1!==n){e.next=8;break}return e.abrupt("return",n);case 8:e.next=3;break;case 10:if(!this._hasMore){e.next=13;break}return e.next=13,this._more();case 13:e.next=1;break;case 15:return e.abrupt("return",!0);case 16:case"end":return e.stop()}},e,this)}));return e}()},{key:"every",value:function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=0;case 1:if(!this._result.length&&!this._hasMore){e.next=15;break}n=void 0;case 3:if(!this._result.length){e.next=10;break}if(n=t(this._result.shift(),r,this),r++,n){e.next=8;break}return e.abrupt("return",!1);case 8:e.next=3;break;case 10:if(!this._hasMore){e.next=13;break}return e.next=13,this._more();case 13:e.next=1;break;case 15:return e.abrupt("return",!0);case 16:case"end":return e.stop()}},e,this)}));return e}()},{key:"some",value:function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=0;case 1:if(!this._result.length&&!this._hasMore){e.next=15;break}n=void 0;case 3:if(!this._result.length){e.next=10;break}if(n=t(this._result.shift(),r,this),r++,!n){e.next=8;break}return e.abrupt("return",!0);case 8:e.next=3;break;case 10:if(!this._hasMore){e.next=13;break}return e.next=13,this._more();case 13:e.next=1;break;case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}},e,this)}));return e}()},{key:"map",value:function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=0,n=[];case 2:if(!this._result.length&&!this._hasMore){e.next=9;break}for(;this._result.length;)n.push(t(this._result.shift(),r,this)),r++;if(!this._hasMore){e.next=7;break}return e.next=7,this._more();case 7:e.next=2;break;case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"reduce",value:function(){function e(e,r){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=0,void 0!==r){e.next=7;break}if(this._result.length||this._hasMore){e.next=5;break}return e.next=5,this._more();case 5:r=this._result.shift(),n+=1;case 7:if(!this._result.length&&!this._hasMore){e.next=14;break}for(;this._result.length;)r=t(r,this._result.shift(),n,this),n++;if(!this._hasMore){e.next=12;break}return e.next=12,this._more();case 12:e.next=7;break;case 14:return e.abrupt("return",r);case 15:case"end":return e.stop()}},e,this)}));return e}()}]),e}()},function(e,t,r){"use strict";var n,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"===("undefined"==typeof window?"undefined":o(window))&&(n=window)}e.exports=n},function(e,t){(function(t){e.exports=t}).call(t,{})},function(e,t,r){"use strict";t.decode=t.parse=r(21),t.encode=t.stringify=r(22)},function(e,t,r){"use strict";function n(e){var t=o.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)}e.exports=n;var o=Object.prototype.toString},function(e,t,r){r(9),e.exports=r(10)},function(e,t,r){"use strict";(function(e){var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(r){function n(e,t,r,n){var o=t&&t.prototype instanceof a?t:a,i=Object.create(o.prototype),u=new v(n||[]);return i._invoke=p(e,r,u),i}function o(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}function a(){}function i(){}function u(){}function s(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function c(e){function r(n,a,i,u){var s=o(e[n],e,a);if("throw"!==s.type){var c=s.arg,p=c.value;return p&&"object"===(void 0===p?"undefined":t(p))&&b.call(p,"__await")?Promise.resolve(p.__await).then(function(e){r("next",e,i,u)},function(e){r("throw",e,i,u)}):Promise.resolve(p).then(function(e){c.value=e,i(c)},u)}u(s.arg)}function n(e,t){function n(){return new Promise(function(n,o){r(e,t,n,o)})}return a=a?a.then(n,n):n()}var a;this._invoke=n}function p(e,t,r){var n=j;return function(a,i){if(n===C)throw new Error("Generator is already running");if(n===E){if("throw"===a)throw i;return y()}for(r.method=a,r.arg=i;;){var u=r.delegate;if(u){var s=h(u,r);if(s){if(s===P)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(n===j)throw n=E,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n=C;var c=o(e,t,r);if("normal"===c.type){if(n=r.done?E:S,c.arg===P)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n=E,r.method="throw",r.arg=c.arg)}}}function h(e,t){var r=e.iterator[t.method];if(r===m){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=m,h(e,t),"throw"===t.method))return P;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return P}var n=o(r,e.iterator,t.arg);if("throw"===n.type)return t.method="throw",t.arg=n.arg,t.delegate=null,P;var a=n.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=m),t.delegate=null,P):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,P)}function f(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function l(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function v(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(f,this),this.reset(!0)}function d(e){if(e){var t=e[w];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(b.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=m,t.done=!0,t};return n.next=n}}return{next:y}}function y(){return{value:m,done:!0}}var m,g=Object.prototype,b=g.hasOwnProperty,x="function"==typeof Symbol?Symbol:{},w=x.iterator||"@@iterator",_=x.asyncIterator||"@@asyncIterator",k=x.toStringTag||"@@toStringTag",R="object"===t(e),O=r.regeneratorRuntime;if(O)return void(R&&(e.exports=O));O=r.regeneratorRuntime=R?e.exports:{},O.wrap=n;var j="suspendedStart",S="suspendedYield",C="executing",E="completed",P={},A={};A[w]=function(){return this};var T=Object.getPrototypeOf,q=T&&T(T(d([])));q&&q!==g&&b.call(q,w)&&(A=q);var L=u.prototype=a.prototype=Object.create(A);i.prototype=L.constructor=u,u.constructor=i,u[k]=i.displayName="GeneratorFunction",O.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===i||"GeneratorFunction"===(t.displayName||t.name))},O.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,k in e||(e[k]="GeneratorFunction")),e.prototype=Object.create(L),e},O.awrap=function(e){return{__await:e}},s(c.prototype),c.prototype[_]=function(){return this},O.AsyncIterator=c,O.async=function(e,t,r,o){var a=new c(n(e,t,r,o));return O.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},s(L),L[k]="Generator",L[w]=function(){return this},L.toString=function(){return"[object Generator]"},O.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var n=t.pop();if(n in e)return r.value=n,r.done=!1,r}return r.done=!0,r}},O.values=d,v.prototype={constructor:v,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=m,this.done=!1,this.delegate=null,this.method="next",this.arg=m,this.tryEntries.forEach(l),!e)for(var t in this)"t"===t.charAt(0)&&b.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=m)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,n){return a.type="throw",a.arg=e,r.next=t,n&&(r.method="next",r.arg=m),!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],a=o.completion;if("root"===o.tryLoc)return t("end");if(o.tryLoc<=this.prev){var i=b.call(o,"catchLoc"),u=b.call(o,"finallyLoc");if(i&&u){if(this.prev<o.catchLoc)return t(o.catchLoc,!0);if(this.prev<o.finallyLoc)return t(o.finallyLoc)}else if(i){if(this.prev<o.catchLoc)return t(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return t(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&b.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,P):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),P},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),l(r),P}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;l(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:d(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=m),P}}}(function(){return this}()||Function("return this")())}).call(t,r(0)(e))},function(e,t,r){"use strict";e.exports=r(11).default},function(e,t,r){"use strict";function n(e){return new o.Database(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.aql=t.Database=void 0,t.default=n;var o=r(12),a=r(1);Object.assign(n,{Database:o.Database,aql:a.aql}),t.Database=o.Database,t.aql=a.aql},function(e,t,r){"use strict";function n(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,a){try{var i=t[o](a),u=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});e(u)}return n("next")})}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e){return(0,h.isArangoCollection)(e)?String(e.name):String(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.Database=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),p=r(1),h=r(2),f=r(13),l=r(3),v=r(36),d=r(37),y=r(38),m=function(){function e(t){a(this,e),this._connection=new f.Connection(t),this._api=this._connection.route("/_api"),this.useBasicAuth()}return c(e,[{key:"route",value:function(e,t){return this._connection.route(e,t)}},{key:"acquireHostList",value:function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(){var t,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._connection.getDatabaseName()){e.next=2;break}throw new Error("Cannot acquire host list with absolute URL");case 2:return e.next=4,this._api.request({path:"/_api/cluster/endpoints"});case 4:t=e.sent,r=t.body.endpoints.map(function(e){return e.endpoint}),this._connection.addToHostList(r);case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"useDatabase",value:function(e){return this._connection.setDatabaseName(e),this}},{key:"useBearerAuth",value:function(e){return this._connection.setHeader("authorization","Bearer "+e),this}},{key:"useBasicAuth",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"root",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this._connection.setHeader("authorization","Basic "+(0,d.btoa)(e+":"+t)),this}},{key:"get",value:function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._api.get("/database/current");case 2:return t=e.sent,e.abrupt("return",t.body.result);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"createDatabase",value:function(){function e(e,r){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._api.post("/database",{users:r,name:t});case 2:return n=e.sent,e.abrupt("return",n.body);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"listDatabases",value:function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._api.get("/database");case 2:return t=e.sent,e.abrupt("return",t.body.result);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"listUserDatabases",value:function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._api.get("/database/user");case 2:return t=e.sent,e.abrupt("return",t.body.result);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"dropDatabase",value:function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._api.delete("/database/"+t);case 2:return r=e.sent,e.abrupt("return",r.body);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"collection",value:function(e){return new h.DocumentCollection(this._connection,e)}},{key:"edgeCollection",value:function(e){return new h.EdgeCollection(this._connection,e)}},{key:"listCollections",value:function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(){var t,r=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._api.get("/collection",{excludeSystem:r});case 2:if(t=e.sent,!(this._connection.arangoMajor<=2)){e.next=5;break}return e.abrupt("return",t.body.collections);case 5:return e.abrupt("return",t.body.result);case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"collections",value:function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(){var t,r=this,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.listCollections(n);case 2:return t=e.sent,e.abrupt("return",t.map(function(e){return(0,h.constructCollection)(r._connection,e)}));case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"truncate",value:function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(){var t,r=this,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.listCollections(n);case 2:return t=e.sent,e.next=5,Promise.all(t.map(function(){var e=o(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._api.put("/collection/"+t.name+"/truncate");case 2:return n=e.sent,e.abrupt("return",n.body);case 4:case"end":return e.stop()}},e,r)}));return function(t){return e.apply(this,arguments)}}()));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"graph",value:function(e){return new v.Graph(this._connection,e)}},{key:"listGraphs",value:function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._api.get("/gharial");case 2:return t=e.sent,e.abrupt("return",t.body.graphs);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"graphs",value:function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(){var t,r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.listGraphs();case 2:return t=e.sent,e.abrupt("return",t.map(function(e){return r.graph(e._key)}));case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"transaction",value:function(){function e(e,r,n,o){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t,r,n,o){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"number"==typeof n&&(o=n,n=void 0),"string"==typeof t?t={write:[t]}:Array.isArray(t)?t={write:t.map(i)}:(0,h.isArangoCollection)(t)?t={write:i(t)}:t&&"object"===(void 0===t?"undefined":s(t))&&(t=u({},t),t.read&&(Array.isArray(t.read)?t.read=t.read.map(i):t.read=i(t.read)),t.write&&(Array.isArray(t.write)?t.write=t.write.map(i):t.write=i(t.write))),e.next=4,this._api.post("/transaction",{collections:t,action:r,params:n,lockTimeout:o});case 4:return a=e.sent,e.abrupt("return",a.body.result);case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"query",value:function(){function e(e,r,n){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t,r,n){var o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(0,p.isAqlQuery)(t)?(n=r,r=t.bindVars,t=t.query):(0,p.isAqlLiteral)(t)&&(t=t.toAQL()),e.next=3,this._api.post("/cursor",u({},n,{query:t,bindVars:r}));case 3:return o=e.sent,e.abrupt("return",new l.ArrayCursor(this._connection,o.body,o.host));case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"listFunctions",value:function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._api.get("/aqlfunction");case 2:return t=e.sent,e.abrupt("return",t.body);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"createFunction",value:function(){function e(e,r){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._api.post("/aqlfunction",{name:t,code:r});case 2:return n=e.sent,e.abrupt("return",n.body);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"dropFunction",value:function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){var r,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._api.delete("/aqlfunction/"+t,{group:n});case 2:return r=e.sent,e.abrupt("return",r.body);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"listServices",value:function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._api.get("/foxx");case 2:return t=e.sent,e.abrupt("return",t.body);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"installService",value:function(){function e(e,r){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t,r){var o,a,i,s,c,p=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=p.configuration,a=p.dependencies,i=n(p,["configuration","dependencies"]),e.next=3,(0,y.toForm)({configuration:o,dependencies:a,source:r});case 3:return s=e.sent,e.next=6,this._api.request({method:"POST",path:"/foxx",body:s.body,isBinary:!0,qs:u({},i,{mount:t}),headers:s.headers});case 6:return c=e.sent,e.abrupt("return",c.body);case 8:case"end":return e.stop()}},e,this)}));return e}()},{key:"upgradeService",value:function(){function e(e,r){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t,r){var o,a,i,s,c,p=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=p.configuration,a=p.dependencies,i=n(p,["configuration","dependencies"]),e.next=3,(0,y.toForm)({configuration:o,dependencies:a,source:r});case 3:return s=e.sent,e.next=6,this._api.request({method:"PATCH",path:"/foxx/service",body:s.body,isBinary:!0,qs:u({},i,{mount:t}),headers:s.headers});case 6:return c=e.sent,e.abrupt("return",c.body);case 8:case"end":return e.stop()}},e,this)}));return e}()},{key:"replaceService",value:function(){function e(e,r){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t,r){var o,a,i,s,c,p=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=p.configuration,a=p.dependencies,i=n(p,["configuration","dependencies"]),e.next=3,(0,y.toForm)({configuration:o,dependencies:a,source:r});case 3:return s=e.sent,e.next=6,this._api.request({method:"PUT",path:"/foxx/service",body:s.body,isBinary:!0,qs:u({},i,{mount:t}),headers:s.headers});case 6:return c=e.sent,e.abrupt("return",c.body);case 8:case"end":return e.stop()}},e,this)}));return e}()},{key:"uninstallService",value:function(){function e(e,r){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._api.delete("/foxx/service",u({},r,{mount:t}));case 2:case"end":return e.stop()}},e,this)}));return e}()},{key:"getService",value:function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._api.get("/foxx/service",{mount:t});case 2:return r=e.sent,e.abrupt("return",r.body);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"getServiceConfiguration",value:function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){var r,n,o,a,i,u,s,c,p=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._api.get("/foxx/configuration",{mount:t,minimal:p});case 2:if(r=e.sent,p){e.next=5;break}return e.abrupt("return",r.body);case 5:for(n={},o=!0,a=!1,i=void 0,e.prev=9,u=Object.keys(r.body)[Symbol.iterator]();!(o=(s=u.next()).done);o=!0)c=s.value,n[c]=r.body[c].current;e.next=17;break;case 13:e.prev=13,e.t0=e.catch(9),a=!0,i=e.t0;case 17:e.prev=17,e.prev=18,!o&&u.return&&u.return();case 20:if(e.prev=20,!a){e.next=23;break}throw i;case 23:return e.finish(20);case 24:return e.finish(17);case 25:return e.abrupt("return",{values:n});case 26:case"end":return e.stop()}},e,this,[[9,13,17,25],[18,,20,24]])}));return e}()},{key:"updateServiceConfiguration",value:function(){function e(e,r){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t,r){var n,o,a,i,u,s,c,p,h,f,l=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._api.patch("/foxx/configuration",r,{mount:t,minimal:l});case 2:if(n=e.sent,o=n.body,!l&&o.values&&o.values.title){e.next=6;break}return e.abrupt("return",o);case 6:return e.next=8,this.getServiceConfiguration(t,l);case 8:if(a=e.sent,i=a.body,!o.warnings){e.next=30;break}for(u=!0,s=!1,c=void 0,e.prev=14,p=Object.keys(i)[Symbol.iterator]();!(u=(h=p.next()).done);u=!0)f=h.value,i[f].warning=o.warnings[f];e.next=22;break;case 18:e.prev=18,e.t0=e.catch(14),s=!0,c=e.t0;case 22:e.prev=22,e.prev=23,!u&&p.return&&p.return();case 25:if(e.prev=25,!s){e.next=28;break}throw c;case 28:return e.finish(25);case 29:return e.finish(22);case 30:return e.abrupt("return",i);case 31:case"end":return e.stop()}},e,this,[[14,18,22,30],[23,,25,29]])}));return e}()},{key:"replaceServiceConfiguration",value:function(){function e(e,r){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t,r){var n,o,a,i,u,s,c,p,h,f,l=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._api.put("/foxx/configuration",r,{mount:t,minimal:l});case 2:if(n=e.sent,o=n.body,!l&&o.values&&o.values.title){e.next=6;break}return e.abrupt("return",o);case 6:return e.next=8,this.getServiceConfiguration(t,l);case 8:if(a=e.sent,i=a.body,!o.warnings){e.next=30;break}for(u=!0,s=!1,c=void 0,e.prev=14,p=Object.keys(i)[Symbol.iterator]();!(u=(h=p.next()).done);u=!0)f=h.value,i[f].warning=o.warnings[f];e.next=22;break;case 18:e.prev=18,e.t0=e.catch(14),s=!0,c=e.t0;case 22:e.prev=22,e.prev=23,!u&&p.return&&p.return();case 25:if(e.prev=25,!s){e.next=28;break}throw c;case 28:return e.finish(25);case 29:return e.finish(22);case 30:return e.abrupt("return",i);case 31:case"end":return e.stop()}},e,this,[[14,18,22,30],[23,,25,29]])}));return e}()},{key:"getServiceDependencies",value:function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){var r,n,o,a,i,u,s,c,p=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._api.get("/foxx/dependencies",{mount:t,minimal:p});case 2:if(r=e.sent,p){e.next=5;break}return e.abrupt("return",r.body);case 5:for(n={},o=!0,a=!1,i=void 0,e.prev=9,u=Object.keys(r.body)[Symbol.iterator]();!(o=(s=u.next()).done);o=!0)c=s.value,n[c]=r.body[c].current;e.next=17;break;case 13:e.prev=13,e.t0=e.catch(9),a=!0,i=e.t0;case 17:e.prev=17,e.prev=18,!o&&u.return&&u.return();case 20:if(e.prev=20,!a){e.next=23;break}throw i;case 23:return e.finish(20);case 24:return e.finish(17);case 25:return e.abrupt("return",{values:n});case 26:case"end":return e.stop()}},e,this,[[9,13,17,25],[18,,20,24]])}));return e}()},{key:"updateServiceDependencies",value:function(){function e(e,r){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t,r){var n,o,a,i,u,s,c,p,h,f,l=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._api.patch("/foxx/dependencies",r,{mount:t,minimal:l});case 2:if(n=e.sent,o=n.body,!l&&o.values&&o.values.title){e.next=6;break}return e.abrupt("return",o);case 6:return e.next=8,this.getServiceDependencies(t,l);case 8:if(a=e.sent,i=a.body,!o.warnings){e.next=30;break}for(u=!0,s=!1,c=void 0,e.prev=14,p=Object.keys(i)[Symbol.iterator]();!(u=(h=p.next()).done);u=!0)f=h.value,i[f].warning=o.warnings[f];e.next=22;break;case 18:e.prev=18,e.t0=e.catch(14),s=!0,c=e.t0;case 22:e.prev=22,e.prev=23,!u&&p.return&&p.return();case 25:if(e.prev=25,!s){e.next=28;break}throw c;case 28:return e.finish(25);case 29:return e.finish(22);case 30:return e.abrupt("return",i);case 31:case"end":return e.stop()}},e,this,[[14,18,22,30],[23,,25,29]])}));return e}()},{key:"replaceServiceDependencies",value:function(){function e(e,r){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t,r){var n,o,a,i,u,s,c,p,h,f,l=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._api.put("/foxx/dependencies",r,{mount:t,minimal:l});case 2:if(n=e.sent,o=n.body,!l&&o.values&&o.values.title){e.next=6;break}return e.abrupt("return",o);case 6:return e.next=8,this.getServiceDependencies(t,l);case 8:if(a=e.sent,i=a.body,!o.warnings){e.next=30;break}for(u=!0,s=!1,c=void 0,e.prev=14,p=Object.keys(i)[Symbol.iterator]();!(u=(h=p.next()).done);u=!0)f=h.value,i[f].warning=o.warnings[f];e.next=22;break;case 18:e.prev=18,e.t0=e.catch(14),s=!0,c=e.t0;case 22:e.prev=22,e.prev=23,!u&&p.return&&p.return();case 25:if(e.prev=25,!s){e.next=28;break}throw c;case 28:return e.finish(25);case 29:return e.finish(22);case 30:return e.abrupt("return",i);case 31:case"end":return e.stop()}},e,this,[[14,18,22,30],[23,,25,29]])}));return e}()},{key:"enableServiceDevelopmentMode",value:function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._api.post("/foxx/development",void 0,{mount:t});case 2:return r=e.sent,e.abrupt("return",r.body);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"disableServiceDevelopmentMode",value:function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._api.delete("/foxx/development",{mount:t});case 2:return r=e.sent,e.abrupt("return",r.body);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"listServiceScripts",value:function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._api.get("/foxx/scripts",{mount:t});case 2:return r=e.sent,e.abrupt("return",r.body);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"runServiceScript",value:function(){function e(e,r,n){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t,r,n){var o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._api.post("/foxx/scripts/"+r,n,{mount:t});case 2:return o=e.sent,e.abrupt("return",o.body);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"runServiceTests",value:function(){function e(e,r){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._api.post("/foxx/tests",void 0,u({},r,{mount:t}));case 2:return n=e.sent,e.abrupt("return",n.body);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"getServiceReadme",value:function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._api.get("/foxx/readme",{mount:t});case 2:return r=e.sent,e.abrupt("return",r.body);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"getServiceDocumentation",value:function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._api.get("/foxx/swagger",{mount:t});case 2:return r=e.sent,e.abrupt("return",r.body);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"downloadService",value:function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._api.request({method:"POST",path:"/foxx/download",qs:{mount:t},expectBinary:!0});case 2:return r=e.sent,e.abrupt("return",r.body);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"commitLocalServiceState",value:function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._api.post("/foxx/commit",void 0,{replace:t});case 2:case"end":return e.stop()}},e,this)}));return e}()},{key:"name",get:function(){return this._connection.getDatabaseName()||null}}]),e}();t.Database=m},function(e,t,r){"use strict";function n(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function o(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.Connection=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(){function e(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw a}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),p=r(14),h=r(17),f=r(33),l=r(34),v=r(6),d=/\/(json|javascript)(\W|$)/;t.Connection=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this._activeTasks=0,this._arangoVersion=3e4,this._databaseName="_system",this._queue=[],this._hosts=[],this._urls=[],"string"==typeof t?t={url:t}:Array.isArray(t)&&(t={url:t}),void 0!==t.arangoVersion&&(this._arangoVersion=t.arangoVersion),t.isAbsolute&&(this._databaseName=!1),this._agent=t.agent,this._agentOptions=h.isBrowser?s({},t.agentOptions):s({maxSockets:3,keepAlive:!0,keepAliveMsecs:1e3},t.agentOptions),this._maxTasks=this._agentOptions.maxSockets||3,this._agentOptions.keepAlive&&(this._maxTasks*=2),this._headers=s({},t.headers),this._loadBalancingStrategy=t.loadBalancingStrategy||"NONE",this._useFailOver="ROUND_ROBIN"!==this._loadBalancingStrategy;var r=t.url?Array.isArray(t.url)?t.url:[t.url]:["http://localhost:8529"];this.addToHostList(r),"ONE_RANDOM"===this._loadBalancingStrategy?this._activeHost=Math.floor(Math.random()*this._hosts.length):this._activeHost=0}return c(e,[{key:"_runQueue",value:function(){var e=this;if(this._queue.length&&!(this._activeTasks>=this._maxTasks)){var t=this._queue.shift(),r=this._activeHost;void 0!==t.host?r=t.host:"ROUND_ROBIN"===this._loadBalancingStrategy&&(this._activeHost=(this._activeHost+1)%this._hosts.length),this._activeTasks+=1,this._hosts[r](t.options,function(n,o){if(e._activeTasks-=1,n)e._hosts.length>1&&e._activeHost===r&&e._useFailOver&&(e._activeHost=(e._activeHost+1)%e._hosts.length),t.reject(n);else{var a=o;if(503===a.statusCode&&a.headers["x-arango-endpoint"]){var i=a.headers["x-arango-endpoint"],s=e.addToHostList(i),c=u(s,1),p=c[0];t.host=p,e._activeHost===r&&(e._activeHost=p),e._queue.push(t)}else a.host=r,t.resolve(a)}e._runQueue()})}}},{key:"_buildUrl",value:function(e){var t=e.absolutePath,r=void 0!==t&&t,n=e.basePath,o=e.path,a=e.qs,i="",u=void 0;return r||(i=this._databasePath,n&&(i+=n)),o&&(i+=o),a&&(u="string"==typeof a?"?"+a:"?"+(0,v.stringify)(a)),u?{pathname:i,search:u}:{pathname:i}}},{key:"_sanitizeEndpointUrl",value:function(e){return e.startsWith("tcp:")?e.replace(/^tcp:/,"http:"):e.startsWith("ssl:")?e.replace(/^ssl:/,"https:"):e}},{key:"addToHostList",value:function(e){var t,r,n=this,a=(Array.isArray(e)?e:[e]).map(function(e){return n._sanitizeEndpointUrl(e)}),i=a.filter(function(e){return-1===n._urls.indexOf(e)});return(t=this._urls).push.apply(t,o(i)),(r=this._hosts).push.apply(r,o(i.map(function(e){return(0,h.createRequest)(e,n._agentOptions,n._agent)}))),a.map(function(e){return n._urls.indexOf(e)})}},{key:"getDatabaseName",value:function(){return this._databaseName}},{key:"getActiveHost",value:function(){return this._activeHost}},{key:"setDatabaseName",value:function(e){if(!1===this._databaseName)throw new Error("Can not change database from absolute URL");this._databaseName=e}},{key:"setHeader",value:function(e,t){this._headers[e]=t}},{key:"route",value:function(e,t){return new f.Route(this,e,t)}},{key:"request",value:function(e){var t=this,r=e.host,o=e.method,a=void 0===o?"GET":o,u=e.body,c=e.expectBinary,f=void 0!==c&&c,v=e.isBinary,y=void 0!==v&&v,m=e.isJsonStream,g=void 0!==m&&m,b=e.headers,x=n(e,["host","method","body","expectBinary","isBinary","isJsonStream","headers"]),w="text/plain";y?w="application/octet-stream":u&&("object"===(void 0===u?"undefined":i(u))?g?(u=u.map(function(e){return JSON.stringify(e)}).join("\r\n")+"\r\n",w="application/x-ldjson"):(u=JSON.stringify(u),w="application/json"):u=String(u));var _=s({},this._headers,{"content-type":w,"x-arango-version":String(this._arangoVersion)});return h.isBrowser||(_["content-length"]=String(u?(0,l.byteLength)(u,"utf-8"):0)),new Promise(function(e,n){t._queue.push({host:r,options:{url:t._buildUrl(x),headers:s({},_,b),method:a,expectBinary:f,body:u},reject:n,resolve:function(t){var r=t.headers["content-type"],o={};if(r&&r.match(d))try{o=t.body&&f?t.body.toString("utf-8"):t.body||"",o=JSON.parse(o)}catch(e){if(!f)return e.response=t,void n(e)}o&&o.hasOwnProperty("error")&&o.hasOwnProperty("code")&&o.hasOwnProperty("errorMessage")&&o.hasOwnProperty("errorNum")?(t.body=o,n(new p.ArangoError(t))):t.statusCode&&t.statusCode>=400?(t.body=o,n(new p.HttpError(t))):(f||(t.body=o),e(t))}}),t._runQueue()})}},{key:"_databasePath",get:function(){return!1===this._databaseName?"":"/_db/"+this._databaseName}},{key:"arangoMajor",get:function(){return Math.floor(this._arangoVersion/1e4)}}]),e}()},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.HttpError=t.ArangoError=void 0;var i=r(15),u=function(e){return e&&e.__esModule?e:{default:e}}(i),s={0:"Network Error",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",444:"Connection Closed Without Response",451:"Unavailable For Legal Reasons",499:"Client Closed Request",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",510:"Not Extended",511:"Network Authentication Required",599:"Network Connect Timeout Error"},c=["fileName","lineNumber","columnNumber","stack","description","number"];t.ArangoError=function(e){function t(e){n(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));r.name="ArangoError",r.isArangoError=!0,r.response=e,r.statusCode=e.statusCode,r.message=e.body.errorMessage,r.errorNum=e.body.errorNum,r.code=e.body.code;var a=new Error(r.message);a.name=r.name;var i=!0,u=!1,s=void 0;try{for(var p,h=c[Symbol.iterator]();!(i=(p=h.next()).done);i=!0){var f=p.value;a[f]&&(r[f]=a[f])}}catch(a){u=!0,s=a}finally{try{!i&&h.return&&h.return()}finally{if(u)throw s}}return r}return a(t,e),t}(u.default),t.HttpError=function(e){function t(e){n(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));r.name="HttpError",r.response=e,r.statusCode=e.statusCode||500,r.message=s[r.statusCode]||s[500],r.code=r.statusCode;var a=new Error(r.message);a.name=r.name;var i=!0,u=!1,p=void 0;try{for(var h,f=c[Symbol.iterator]();!(i=(h=f.next()).done);i=!0){var l=h.value;a[l]&&(r[l]=a[l])}}catch(a){u=!0,p=a}finally{try{!i&&f.return&&f.return()}finally{if(u)throw p}}return r}return a(t,e),t}(u.default)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=r(16)},function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":i(t))&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":i(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};Object.defineProperty(t,"__esModule",{value:!0});var u=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";n(this,t);var r=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object.defineProperty(r,"message",{configurable:!0,enumerable:!1,value:e,writable:!0}),Object.defineProperty(r,"name",{configurable:!0,enumerable:!1,value:r.constructor.name,writable:!0}),Error.hasOwnProperty("captureStackTrace")?(Error.captureStackTrace(r,r.constructor),o(r)):(Object.defineProperty(r,"stack",{configurable:!0,enumerable:!1,value:new Error(e).stack,writable:!0}),r)}return a(t,e),t}(function(e){function t(){e.apply(this,arguments)}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Error));t.default=u,e.exports=t.default},function(e,t,r){"use strict";function n(e,t){var r={},n=!0,o=!1,a=void 0;try{for(var i,u=Object.keys(e)[Symbol.iterator]();!(n=(i=u.next()).done);n=!0){var s=i.value;t.includes(s)||(r[s]=e[s])}}catch(e){o=!0,a=e}finally{try{!n&&u.return&&u.return()}finally{if(o)throw a}}return r}function o(e,t){var r=(0,i.parse)(e),o=n(t,["keepAlive","keepAliveMsecs","maxSockets"]);return function(e,t){var n=e.method,s=e.url,p=e.headers,h=e.body,f=e.expectBinary,l=a({},r,{pathname:s.pathname?r.pathname?(0,u.joinPath)(r.pathname,s.pathname):s.pathname:r.pathname,search:s.search?r.search?r.search+"&"+s.search.slice(1):s.search:r.search}),v=function(e,r){v=function(){},t(e,r)},d=(0,c.default)(a({responseType:f?"blob":"text"},o,{url:(0,i.format)(l),withCredentials:!0,useXDR:!0,body:h,method:n,headers:p}),function(e,t){if(e){var r=e;r.request=d,v(r)}else v(null,t)})}}Object.defineProperty(t,"__esModule",{value:!0}),t.isBrowser=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};t.createRequest=o;var i=r(18),u=r(23),s=r(26),c=function(e){return e&&e.__esModule?e:{default:e}}(s);t.isBrowser=!0},function(e,t,r){"use strict";function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function o(e,t,r){if(e&&p.isObject(e)&&e instanceof n)return e;var o=new n;return o.parse(e,t,r),o}function a(e){return p.isString(e)&&(e=o(e)),e instanceof n?e.format():n.prototype.format.call(e)}function i(e,t){return o(e,!1,!0).resolve(t)}function u(e,t){return e?o(e,!1,!0).resolveObject(t):t}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c=r(19),p=r(20);t.parse=o,t.resolve=i,t.resolveObject=u,t.format=a,t.Url=n;var h=/^([a-z0-9.+-]+:)/i,f=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,v=["<",">",'"',"`"," ","\r","\n","\t"],d=["{","}","|","\\","^","`"].concat(v),y=["'"].concat(d),m=["%","/","?",";","#"].concat(y),g=["/","?","#"],b=/^[+a-z0-9A-Z_-]{0,63}$/,x=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,w={javascript:!0,"javascript:":!0},_={javascript:!0,"javascript:":!0},k={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},R=r(6);n.prototype.parse=function(e,t,r){if(!p.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+(void 0===e?"undefined":s(e)));var n=e.indexOf("?"),o=-1!==n&&n<e.indexOf("#")?"?":"#",a=e.split(o),i=/\\/g;a[0]=a[0].replace(i,"/"),e=a.join(o);var u=e;if(u=u.trim(),!r&&1===e.split("#").length){var f=l.exec(u);if(f)return this.path=u,this.href=u,this.pathname=f[1],f[2]?(this.search=f[2],this.query=t?R.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var v=h.exec(u);if(v){v=v[0];var d=v.toLowerCase();this.protocol=d,u=u.substr(v.length)}if(r||v||u.match(/^\/\/[^@\/]+@[^@\/]+/)){var O="//"===u.substr(0,2);!O||v&&_[v]||(u=u.substr(2),this.slashes=!0)}if(!_[v]&&(O||v&&!k[v])){for(var j=-1,S=0;S<g.length;S++){var C=u.indexOf(g[S]);-1!==C&&(-1===j||C<j)&&(j=C)}var E,P;P=-1===j?u.lastIndexOf("@"):u.lastIndexOf("@",j),-1!==P&&(E=u.slice(0,P),u=u.slice(P+1),this.auth=decodeURIComponent(E)),j=-1;for(var S=0;S<m.length;S++){var C=u.indexOf(m[S]);-1!==C&&(-1===j||C<j)&&(j=C)}-1===j&&(j=u.length),this.host=u.slice(0,j),u=u.slice(j),this.parseHost(),this.hostname=this.hostname||"";var A="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!A)for(var T=this.hostname.split(/\./),S=0,q=T.length;S<q;S++){var L=T[S];if(L&&!L.match(b)){for(var M="",N=0,H=L.length;N<H;N++)L.charCodeAt(N)>127?M+="x":M+=L[N];if(!M.match(b)){var D=T.slice(0,S),I=T.slice(S+1),U=L.match(x);U&&(D.push(U[1]),I.unshift(U[2])),I.length&&(u="/"+I.join(".")+u),this.hostname=D.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),A||(this.hostname=c.toASCII(this.hostname));var B=this.port?":"+this.port:"",G=this.hostname||"";this.host=G+B,this.href+=this.host,A&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==u[0]&&(u="/"+u))}if(!w[d])for(var S=0,q=y.length;S<q;S++){var F=y[S];if(-1!==u.indexOf(F)){var V=encodeURIComponent(F);V===F&&(V=escape(F)),u=u.split(F).join(V)}}var X=u.indexOf("#");-1!==X&&(this.hash=u.substr(X),u=u.slice(0,X));var z=u.indexOf("?");if(-1!==z?(this.search=u.substr(z),this.query=u.substr(z+1),t&&(this.query=R.parse(this.query)),u=u.slice(0,z)):t&&(this.search="",this.query={}),u&&(this.pathname=u),k[d]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var B=this.pathname||"",J=this.search||"";this.path=B+J}return this.href=this.format(),this},n.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",o=!1,a="";this.host?o=e+this.host:this.hostname&&(o=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&p.isObject(this.query)&&Object.keys(this.query).length&&(a=R.stringify(this.query));var i=this.search||a&&"?"+a||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||k[t])&&!1!==o?(o="//"+(o||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):o||(o=""),n&&"#"!==n.charAt(0)&&(n="#"+n),i&&"?"!==i.charAt(0)&&(i="?"+i),r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),i=i.replace("#","%23"),t+o+r+i+n},n.prototype.resolve=function(e){return this.resolveObject(o(e,!1,!0)).format()},n.prototype.resolveObject=function(e){if(p.isString(e)){var t=new n;t.parse(e,!1,!0),e=t}for(var r=new n,o=Object.keys(this),a=0;a<o.length;a++){var i=o[a];r[i]=this[i]}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var u=Object.keys(e),s=0;s<u.length;s++){var c=u[s];"protocol"!==c&&(r[c]=e[c])}return k[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!k[e.protocol]){for(var h=Object.keys(e),f=0;f<h.length;f++){var l=h[f];r[l]=e[l]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||_[e.protocol])r.pathname=e.pathname;else{for(var v=(e.pathname||"").split("/");v.length&&!(e.host=v.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==v[0]&&v.unshift(""),v.length<2&&v.unshift(""),r.pathname=v.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var d=r.pathname||"",y=r.search||"";r.path=d+y}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var m=r.pathname&&"/"===r.pathname.charAt(0),g=e.host||e.pathname&&"/"===e.pathname.charAt(0),b=g||m||r.host&&e.pathname,x=b,w=r.pathname&&r.pathname.split("/")||[],v=e.pathname&&e.pathname.split("/")||[],R=r.protocol&&!k[r.protocol];if(R&&(r.hostname="",r.port=null,r.host&&(""===w[0]?w[0]=r.host:w.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===v[0]?v[0]=e.host:v.unshift(e.host)),e.host=null),b=b&&(""===v[0]||""===w[0])),g)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,w=v;else if(v.length)w||(w=[]),w.pop(),w=w.concat(v),r.search=e.search,r.query=e.query;else if(!p.isNullOrUndefined(e.search)){if(R){r.hostname=r.host=w.shift();var O=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");O&&(r.auth=O.shift(),r.host=r.hostname=O.shift())}return r.search=e.search,r.query=e.query,p.isNull(r.pathname)&&p.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!w.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var j=w.slice(-1)[0],S=(r.host||e.host||w.length>1)&&("."===j||".."===j)||""===j,C=0,E=w.length;E>=0;E--)j=w[E],"."===j?w.splice(E,1):".."===j?(w.splice(E,1),C++):C&&(w.splice(E,1),C--);if(!b&&!x)for(;C--;C)w.unshift("..");!b||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),S&&"/"!==w.join("/").substr(-1)&&w.push("");var P=""===w[0]||w[0]&&"/"===w[0].charAt(0);if(R){r.hostname=r.host=P?"":w.length?w.shift():"";var O=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@");O&&(r.auth=O.shift(),r.host=r.hostname=O.shift())}return b=b||r.host&&w.length,b&&!P&&w.unshift(""),w.length?r.pathname=w.join("/"):(r.pathname=null,r.path=null),p.isNull(r.pathname)&&p.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},n.prototype.parseHost=function(){var e=this.host,t=f.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,r){"use strict";(function(e,n){var o,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(i){function u(e){throw new RangeError(N[e])}function s(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function c(e,t){var r=e.split("@"),n="";return r.length>1&&(n=r[0]+"@",e=r[1]),e=e.replace(M,"."),n+s(e.split("."),t).join(".")}function p(e){for(var t,r,n=[],o=0,a=e.length;o<a;)t=e.charCodeAt(o++),t>=55296&&t<=56319&&o<a?(r=e.charCodeAt(o++),56320==(64512&r)?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),o--)):n.push(t);return n}function h(e){return s(e,function(e){var t="";return e>65535&&(e-=65536,t+=I(e>>>10&1023|55296),e=56320|1023&e),t+=I(e)}).join("")}function f(e){return e-48<10?e-22:e-65<26?e-65:e-97<26?e-97:O}function l(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function v(e,t,r){var n=0;for(e=r?D(e/E):e>>1,e+=D(e/t);e>H*S>>1;n+=O)e=D(e/H);return D(n+(H+1)*e/(e+C))}function d(e){var t,r,n,o,a,i,s,c,p,l,d=[],y=e.length,m=0,g=A,b=P;for(r=e.lastIndexOf(T),r<0&&(r=0),n=0;n<r;++n)e.charCodeAt(n)>=128&&u("not-basic"),d.push(e.charCodeAt(n));for(o=r>0?r+1:0;o<y;){for(a=m,i=1,s=O;o>=y&&u("invalid-input"),c=f(e.charCodeAt(o++)),(c>=O||c>D((R-m)/i))&&u("overflow"),m+=c*i,p=s<=b?j:s>=b+S?S:s-b,!(c<p);s+=O)l=O-p,i>D(R/l)&&u("overflow"),i*=l;t=d.length+1,b=v(m-a,t,0==a),D(m/t)>R-g&&u("overflow"),g+=D(m/t),m%=t,d.splice(m++,0,g)}return h(d)}function y(e){var t,r,n,o,a,i,s,c,h,f,d,y,m,g,b,x=[];for(e=p(e),y=e.length,t=A,r=0,a=P,i=0;i<y;++i)(d=e[i])<128&&x.push(I(d));for(n=o=x.length,o&&x.push(T);n<y;){for(s=R,i=0;i<y;++i)(d=e[i])>=t&&d<s&&(s=d);for(m=n+1,s-t>D((R-r)/m)&&u("overflow"),r+=(s-t)*m,t=s,i=0;i<y;++i)if(d=e[i],d<t&&++r>R&&u("overflow"),d==t){for(c=r,h=O;f=h<=a?j:h>=a+S?S:h-a,!(c<f);h+=O)b=c-f,g=O-f,x.push(I(l(f+b%g,0))),c=D(b/g);x.push(I(l(c,0))),a=v(r,m,n==o),r=0,++n}++r,++t}return x.join("")}function m(e){return c(e,function(e){return q.test(e)?d(e.slice(4).toLowerCase()):e})}function g(e){return c(e,function(e){return L.test(e)?"xn--"+y(e):e})}var b="object"==a(t)&&t&&!t.nodeType&&t,x="object"==a(e)&&e&&!e.nodeType&&e,w="object"==(void 0===n?"undefined":a(n))&&n;w.global!==w&&w.window!==w&&w.self!==w||(i=w);var _,k,R=2147483647,O=36,j=1,S=26,C=38,E=700,P=72,A=128,T="-",q=/^xn--/,L=/[^\x20-\x7E]/,M=/[\x2E\u3002\uFF0E\uFF61]/g,N={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},H=O-j,D=Math.floor,I=String.fromCharCode;if(_={version:"1.4.1",ucs2:{decode:p,encode:h},decode:d,encode:y,toASCII:g,toUnicode:m},"object"==a(r(5))&&r(5))void 0!==(o=function(){return _}.call(t,r,t,e))&&(e.exports=o);else if(b&&x)if(e.exports==b)x.exports=_;else for(k in _)_.hasOwnProperty(k)&&(b[k]=_[k]);else i.punycode=_}(void 0)}).call(t,r(0)(e),r(4))},function(e,t,r){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"===(void 0===e?"undefined":n(e))&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,r){"use strict";function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,r,a){t=t||"&",r=r||"=";var i={};if("string"!=typeof e||0===e.length)return i;var u=/\+/g;e=e.split(t);var s=1e3;a&&"number"==typeof a.maxKeys&&(s=a.maxKeys);var c=e.length;s>0&&c>s&&(c=s);for(var p=0;p<c;++p){var h,f,l,v,d=e[p].replace(u,"%20"),y=d.indexOf(r);y>=0?(h=d.substr(0,y),f=d.substr(y+1)):(h=d,f=""),l=decodeURIComponent(h),v=decodeURIComponent(f),n(i,l)?o(i[l])?i[l].push(v):i[l]=[i[l],v]:i[l]=v}return i};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,r){"use strict";function n(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(e){switch(void 0===e?"undefined":o(e)){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,r,s){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"===(void 0===e?"undefined":o(e))?n(u(e),function(o){var u=encodeURIComponent(a(o))+r;return i(e[o])?n(e[o],function(e){return u+encodeURIComponent(a(e))}).join(t):u+encodeURIComponent(a(e[o]))}).join(t):s?encodeURIComponent(a(s))+r+encodeURIComponent(a(e)):""};var i=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},u=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(24);Object.defineProperty(t,"joinPath",{enumerable:!0,get:function(){return n.join}})},function(e,t,r){"use strict";(function(e){function r(e,t){for(var r=0,n=e.length-1;n>=0;n--){var o=e[n];"."===o?e.splice(n,1):".."===o?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}function n(e,t){if(e.filter)return e.filter(t);for(var r=[],n=0;n<e.length;n++)t(e[n],n,e)&&r.push(e[n]);return r}var o=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,a=function(e){return o.exec(e).slice(1)};t.resolve=function(){for(var t="",o=!1,a=arguments.length-1;a>=-1&&!o;a--){var i=a>=0?arguments[a]:e.cwd();if("string"!=typeof i)throw new TypeError("Arguments to path.resolve must be strings");i&&(t=i+"/"+t,o="/"===i.charAt(0))}return t=r(n(t.split("/"),function(e){return!!e}),!o).join("/"),(o?"/":"")+t||"."},t.normalize=function(e){var o=t.isAbsolute(e),a="/"===i(e,-1);return e=r(n(e.split("/"),function(e){return!!e}),!o).join("/"),e||o||(e="."),e&&a&&(e+="/"),(o?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(n(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},t.relative=function(e,r){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=t.resolve(e).substr(1),r=t.resolve(r).substr(1);for(var o=n(e.split("/")),a=n(r.split("/")),i=Math.min(o.length,a.length),u=i,s=0;s<i;s++)if(o[s]!==a[s]){u=s;break}for(var c=[],s=u;s<o.length;s++)c.push("..");return c=c.concat(a.slice(u)),c.join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){var t=a(e),r=t[0],n=t[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},t.basename=function(e,t){var r=a(e)[2];return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},t.extname=function(e){return a(e)[3]};var i="b"==="ab".substr(-1)?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return t<0&&(t=e.length+t),e.substr(t,r)}}).call(t,r(25))},function(e,t,r){"use strict";function n(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(e){if(h===setTimeout)return setTimeout(e,0);if((h===n||!h)&&setTimeout)return h=setTimeout,setTimeout(e,0);try{return h(e,0)}catch(t){try{return h.call(null,e,0)}catch(t){return h.call(this,e,0)}}}function i(e){if(f===clearTimeout)return clearTimeout(e);if((f===o||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function u(){y&&v&&(y=!1,v.length?d=v.concat(d):m=-1,d.length&&s())}function s(){if(!y){var e=a(u);y=!0;for(var t=d.length;t;){for(v=d,d=[];++m<t;)v&&v[m].run();m=-1,t=d.length}v=null,y=!1,i(e)}}function c(e,t){this.fun=e,this.array=t}function p(){}var h,f,l=e.exports={};!function(){try{h="function"==typeof setTimeout?setTimeout:n}catch(e){h=n}try{f="function"==typeof clearTimeout?clearTimeout:o}catch(e){f=o}}();var v,d=[],y=!1,m=-1;l.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];d.push(new c(e,t)),1!==d.length||y||a(s)},c.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=p,l.addListener=p,l.once=p,l.off=p,l.removeListener=p,l.removeAllListeners=p,l.emit=p,l.prependListener=p,l.prependOnceListener=p,l.listeners=function(e){return[]},l.binding=function(e){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(e){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=r(27)},function(e,t,r){"use strict";function n(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function o(e,t,r){var n=e;return p(t)?(r=t,"string"==typeof e&&(n={uri:e})):n=f(t,{uri:e}),n.callback=r,n}function a(e,t,r){return t=o(e,t,r),i(t)}function i(e){function t(){4===p.readyState&&setTimeout(i,0)}function r(){var e=void 0;if(e=p.response?p.response:p.responseText||u(p),x)try{e=JSON.parse(e)}catch(e){}return e}function o(e){return clearTimeout(v),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,c(e,w)}function i(){if(!l){var t;clearTimeout(v),t=e.useXDR&&void 0===p.status?200:1223===p.status?204:p.status;var n=w,o=null;return 0!==t?(n={body:r(),statusCode:t,method:y,headers:{},url:d,rawRequest:p},p.getAllResponseHeaders&&(n.headers=h(p.getAllResponseHeaders()))):o=new Error("Internal XMLHttpRequest Error"),c(o,n,n.body)}}if(void 0===e.callback)throw new Error("callback argument missing");var s=!1,c=function(t,r,n){s||(s=!0,e.callback(t,r,n))},p=e.xhr||null;p||(p=e.cors||e.useXDR?new a.XDomainRequest:new a.XMLHttpRequest);var f,l,v,d=p.url=e.uri||e.url,y=p.method=e.method||"GET",m=e.body||e.data,g=p.headers=e.headers||{},b=!!e.sync,x=!1,w={body:void 0,headers:{},statusCode:0,method:y,url:d,rawRequest:p};if("json"in e&&!1!==e.json&&(x=!0,g.accept||g.Accept||(g.Accept="application/json"),"GET"!==y&&"HEAD"!==y&&(g["content-type"]||g["Content-Type"]||(g["Content-Type"]="application/json"),m=JSON.stringify(!0===e.json?m:e.json))),p.onreadystatechange=t,p.onload=i,p.onerror=o,p.onprogress=function(){},p.onabort=function(){l=!0},p.ontimeout=o,p.open(y,d,!b,e.username,e.password),b||(p.withCredentials=!!e.withCredentials),!b&&e.timeout>0&&(v=setTimeout(function(){if(!l){l=!0,p.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",o(e)}},e.timeout)),p.setRequestHeader)for(f in g)g.hasOwnProperty(f)&&p.setRequestHeader(f,g[f]);else if(e.headers&&!n(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(p.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(p),p.send(m||null),p}function u(e){try{if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;if(""===e.responseType&&!t)return e.responseXML}catch(e){}return null}function s(){}var c=r(28),p=r(7),h=r(29),f=r(32);e.exports=a,a.XMLHttpRequest=c.XMLHttpRequest||s,a.XDomainRequest="withCredentials"in new a.XMLHttpRequest?a.XMLHttpRequest:c.XDomainRequest,function(e,t){for(var r=0;r<e.length;r++)t(e[r])}(["get","put","post","patch","head","delete"],function(e){a["delete"===e?"del":e]=function(t,r,n){return r=o(t,r,n),r.method=e.toUpperCase(),i(r)}})},function(e,t,r){"use strict";(function(t){var r;r="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},e.exports=r}).call(t,r(4))},function(e,t,r){"use strict";var n=r(30),o=r(31),a=function(e){return"[object Array]"===Object.prototype.toString.call(e)};e.exports=function(e){if(!e)return{};var t={};return o(n(e).split("\n"),function(e){var r=e.indexOf(":"),o=n(e.slice(0,r)).toLowerCase(),i=n(e.slice(r+1));void 0===t[o]?t[o]=i:a(t[o])?t[o].push(i):t[o]=[t[o],i]}),t}},function(e,t,r){"use strict";function n(e){return e.replace(/^\s*|\s*$/g,"")}t=e.exports=n,t.left=function(e){return e.replace(/^\s*/,"")},t.right=function(e){return e.replace(/\s*$/,"")}},function(e,t,r){"use strict";function n(e,t,r){if(!u(t))throw new TypeError("iterator must be a function");arguments.length<3&&(r=this),"[object Array]"===s.call(e)?o(e,t,r):"string"==typeof e?a(e,t,r):i(e,t,r)}function o(e,t,r){for(var n=0,o=e.length;n<o;n++)c.call(e,n)&&t.call(r,e[n],n,e)}function a(e,t,r){for(var n=0,o=e.length;n<o;n++)t.call(r,e.charAt(n),n,e)}function i(e,t,r){for(var n in e)c.call(e,n)&&t.call(r,e[n],n,e)}var u=r(7);e.exports=n;var s=Object.prototype.toString,c=Object.prototype.hasOwnProperty},function(e,t,r){"use strict";function n(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];for(var n in r)o.call(r,n)&&(e[n]=r[n])}return e}e.exports=n;var o=Object.prototype.hasOwnProperty},function(e,t,r){"use strict";function n(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();t.Route=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};o(this,e),r?"/"!==r.charAt(0)&&(r="/"+r):r="",this._connection=t,this._path=r,this._headers=n}return u(e,[{key:"route",value:function(t,r){return t?"/"!==t.charAt(0)&&(t="/"+t):t="",new e(this._connection,this._path+t,i({},this._headers,r))}},{key:"request",value:function(e){var t=e.method,r=e.path,o=e.headers,a=void 0===o?{}:o,u=n(e,["method","path","headers"]);return r?this._path&&"/"!==r.charAt(0)?u.spath="/"+r:u.path=r:u.path="",u.basePath=this._path,u.headers=i({},this._headers,a),u.method=t?t.toUpperCase():"GET",this._connection.request(u)}},{key:"_request1",value:function(e){for(var t="",r=void 0,n=void 0,o=arguments.length,i=Array(o>1?o-1:0),u=1;u<o;u++)i[u-1]=arguments[u];return void 0!==i[0]&&"string"!=typeof i[0]||(t=i.shift()),void 0!==i[0]&&"object"!==a(i[0])||(r=i.shift()),void 0!==i[0]&&"object"!==a(i[0])||(n=i.shift()),this.request({method:e,path:t,qs:r,headers:n})}},{key:"_request2",value:function(e){for(var t="",r=void 0,n=void 0,o=void 0,i=arguments.length,u=Array(i>1?i-1:0),s=1;s<i;s++)u[s-1]=arguments[s];return void 0!==u[0]&&"string"!=typeof u[0]||(t=u.shift()),r=u.shift(),void 0!==u[0]&&"object"!==a(u[0])||(n=u.shift()),void 0!==u[0]&&"object"!==a(u[0])||(o=u.shift()),this.request({method:e,path:t,body:r,qs:n,headers:o})}},{key:"delete",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return this._request1.apply(this,["DELETE"].concat(t))}},{key:"get",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return this._request1.apply(this,["GET"].concat(t))}},{key:"head",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return this._request1.apply(this,["HEAD"].concat(t))}},{key:"patch",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return this._request2.apply(this,["PATCH"].concat(t))}},{key:"post",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return this._request2.apply(this,["POST"].concat(t))}},{key:"put",value:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return this._request2.apply(this,["PUT"].concat(t))}}]),e}()},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(35);Object.defineProperty(t,"byteLength",{enumerable:!0,get:function(){return n(o).default}})},function(e,t,r){"use strict";e.exports=function(e){return~-encodeURI(e).split(/%..|./).length}},function(e,t,r){"use strict";function n(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function o(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(o,a){try{var i=t[o](a),u=i.value}catch(e){return void r(e)}if(!i.done)return Promise.resolve(u).then(function(e){n("next",e)},function(e){n("throw",e)});e(u)}return n("next")})}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Graph=t.GraphEdgeCollection=t.GraphVertexCollection=void 0;var s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),p=r(2),h=t.GraphVertexCollection=function(e){function t(e,r,n){a(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return o.type=p.Types.DOCUMENT_COLLECTION,o.graph=n,o._gharial=o._api.route("/gharial/"+o.graph.name+"/vertex"),o}return u(t,e),c(t,[{key:"_documentPath",value:function(e){return"/document/"+this._documentHandle(e)}},{key:"vertex",value:function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._gharial.get("/"+this._documentHandle(t));case 2:return r=e.sent,e.abrupt("return",r.body.vertex);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"save",value:function(){function e(e,r){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._gharial.post(this.name,t,r);case 2:return n=e.sent,e.abrupt("return",n.body.vertex);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"replace",value:function(){function e(e,r){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t,r){var o,a,i,u,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o={},"string"==typeof s&&(s={rev:s}),s.rev&&(a=void 0,i=s,a=i.rev,s=n(i,["rev"]),o["if-match"]=a),e.next=5,this._gharial.put("/"+this._documentHandle(t),r,s,o);case 5:return u=e.sent,e.abrupt("return",u.body.vertex);case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"update",value:function(){function e(e,r){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t,r){var o,a,i,u,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o={},"string"==typeof s&&(s={rev:s}),s.rev&&(a=void 0,i=s,a=i.rev,s=n(i,["rev"]),o["if-match"]=a),e.next=5,this._gharial.patch("/"+this._documentHandle(t),r,s,o);case 5:return u=e.sent,e.abrupt("return",u.body.vertex);case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"remove",value:function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){var r,o,a,i,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},"string"==typeof u&&(u={rev:u}),u.rev&&(o=void 0,a=u,o=a.rev,u=n(a,["rev"]),r["if-match"]=o),e.next=5,this._gharial.delete("/"+this._documentHandle(t),u,r);case 5:return i=e.sent,e.abrupt("return",i.body.removed);case 7:case"end":return e.stop()}},e,this)}));return e}()}]),t}(p.BaseCollection),f=t.GraphEdgeCollection=function(e){function t(e,r,n){a(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));return o.type=p.Types.EDGE_COLLECTION,o.type=p.Types.EDGE_COLLECTION,o.graph=n,o._gharial=o._api.route("/gharial/"+o.graph.name+"/edge"),o}return u(t,e),c(t,[{key:"edge",value:function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._gharial.get("/"+this._documentHandle(t));case 2:return r=e.sent,e.abrupt("return",r.body.graph);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"save",value:function(){function e(e,r,n,o){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t,r,n,o){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return void 0!==r&&(void 0!==n?(t._from=this._documentHandle(r),t._to=this._documentHandle(n)):o=r),e.next=3,this._gharial.post(this.name,t,o);case 3:return a=e.sent,e.abrupt("return",a.body.edge);case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"replace",value:function(){function e(e,r){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t,r){var o,a,i,u,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o={},"string"==typeof s&&(s={rev:s}),s.rev&&(a=void 0,i=s,a=i.rev,s=n(i,["rev"]),o["if-match"]=a),e.next=5,this._gharial.put("/"+this._documentHandle(t),r,s,o);case 5:return u=e.sent,e.abrupt("return",u.body.edge);case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"update",value:function(){function e(e,r){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t,r){var o,a,i,u,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o={},"string"==typeof s&&(s={rev:s}),s.rev&&(a=void 0,i=s,a=i.rev,s=n(i,["rev"]),o["if-match"]=a),e.next=5,this._gharial.patch("/"+this._documentHandle(t),r,s,o);case 5:return u=e.sent,e.abrupt("return",u.body.edge);case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"remove",value:function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){var r,o,a,i,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={},"string"==typeof u&&(u={rev:u}),u.rev&&(o=void 0,a=u,o=a.rev,u=n(a,["rev"]),r["if-match"]=o),e.next=5,this._gharial.delete("/"+this._documentHandle(t),u,r);case 5:return i=e.sent,e.abrupt("return",i.body.removed);case 7:case"end":return e.stop()}},e,this)}));return e}()}]),t}(p.EdgeCollection);t.Graph=function(){function e(t,r){a(this,e),this.name=r,this._connection=t,this._api=this._connection.route("/_api"),this._gharial=this._api.route("/gharial/"+this.name)}return c(e,[{key:"get",value:function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._gharial.get();case 2:return t=e.sent,e.abrupt("return",t.body.graph);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"create",value:function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments[1];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._api.post("/gharial",s({},r,{name:this.name}),n);case 2:return t=e.sent,e.abrupt("return",t.body.graph);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"drop",value:function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(){var t,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._gharial.delete({dropCollections:r});case 2:return t=e.sent,e.abrupt("return",t.body.removed);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"vertexCollection",value:function(e){return new h(this._connection,e,this)}},{key:"listVertexCollections",value:function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._gharial.get("/vertex",t);case 2:return r=e.sent,e.abrupt("return",r.body.collections);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"vertexCollections",value:function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){var r,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.listVertexCollections(t);case 2:return r=e.sent,e.abrupt("return",r.map(function(e){return new h(n._connection,e,n)}));case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"addVertexCollection",value:function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(0,p.isArangoCollection)(t)&&(t=t.name),e.next=3,this._gharial.post("/vertex",{collection:t});case 3:return r=e.sent,e.abrupt("return",r.body.graph);case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"removeVertexCollection",value:function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){var r,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(0,p.isArangoCollection)(t)&&(t=t.name),e.next=3,this._gharial.delete("/vertex/"+t,{dropCollection:n});case 3:return r=e.sent,e.abrupt("return",r.body.graph);case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"edgeCollection",value:function(e){return new f(this._connection,e,this)}},{key:"listEdgeCollections",value:function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._gharial.get("/edge");case 2:return t=e.sent,e.abrupt("return",t.body.collections);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"edgeCollections",value:function(){function e(){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(){var t,r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.listEdgeCollections();case 2:return t=e.sent,e.abrupt("return",t.map(function(e){return new f(r._connection,e,r)}));case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"addEdgeDefinition",value:function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._gharial.post("/edge",t);case 2:return r=e.sent,e.abrupt("return",r.body.graph);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"replaceEdgeDefinition",value:function(){function e(e,r){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._gharial.put("/edge/"+t,r);case 2:return n=e.sent,e.abrupt("return",n.body.graph);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"removeEdgeDefinition",value:function(){function e(e){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t){var r,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._gharial.delete("edge/"+t,{dropCollection:n});case 2:return r=e.sent,e.abrupt("return",r.body.graph);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"traversal",value:function(){function e(e,r){return t.apply(this,arguments)}var t=o(regeneratorRuntime.mark(function e(t,r){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._api.post("/traversal",s({},r,{startVertex:t,graphName:this.name}));case 2:return n=e.sent,e.abrupt("return",n.body.result);case 4:case"end":return e.stop()}},e,this)}));return e}()}]),e}()},function(e,t,r){"use strict";function n(e){return window.btoa(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.btoa=n},function(e,t,r){"use strict";function n(e,t){var r=void 0;try{r=new FormData;var n=!0,a=!1,i=void 0;try{for(var u,s=Object.keys(e)[Symbol.iterator]();!(n=(u=s.next()).done);n=!0){var c=u.value,p=e[c];void 0!==p&&(p instanceof Blob||"object"!==(void 0===p?"undefined":o(p))&&"function"!=typeof p||(p=JSON.stringify(p)),r.append(c,p))}}catch(e){a=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(a)throw i}}}catch(e){return void t(e)}t(null,{body:r})}Object.defineProperty(t,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.toForm=n}])});
//# sourceMappingURL=web.js.map